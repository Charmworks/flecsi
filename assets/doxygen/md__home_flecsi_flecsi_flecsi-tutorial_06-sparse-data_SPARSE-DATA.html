<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="flecsi-favicon.ico" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Interface Documentation: FleCSI: Tutorial - 05 Sparse Data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" height="200" style="margin-top:40px; margin-left:30px; margin-right:10px" src="medium-flecsi.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interface Documentation<br>
		<span id="projectnumber">Version:</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FleCSI: Tutorial - 05 Sparse Data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Sparse Data</h1>
<p>The FleCSI sparse storage class allows the representation of sparse data fields, i.e., fields on which one or more data may be defined at each index of the associated index space. The sparse storage class is suitable for representing sparse matrices, sparse materials, or any other logical data structure that utilizes a compressed storage appraoch. <em>Note that although the current implementation does use a compressed storage scheme, there is no guaruntee that this will be the case.</em> The sparse storage class defines the interface to the registered field data, not the storage mechanism. We are investigating design changes that will allow specialization developers to add new storage classes.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include&lt;flecsi-tutorial/specialization/mesh/mesh.h&gt;</span></div><div class="line"><span class="preprocessor">#include&lt;<a class="code" href="data_8h.html">flecsi/data/data.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include&lt;<a class="code" href="execution_8h.html">flecsi/execution/execution.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceflecsi.html">flecsi</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceflecsi_1_1tutorial.html">flecsi::tutorial</a>;</div><div class="line"></div><div class="line"><a class="code" href="group__data.html#gaaa855ccd1c709526c76247bce774ff64">flecsi_register_data_client</a>(<a class="code" href="structflecsi_1_1tutorial_1_1specialization__mesh__t.html">mesh_t</a>, clients, mesh);</div><div class="line"><a class="code" href="group__data.html#ga94367ffbedff524f08ddef3a27df2b36">flecsi_register_field</a>(<a class="code" href="structflecsi_1_1tutorial_1_1specialization__mesh__t.html">mesh_t</a>, <a class="code" href="namespaceexample.html">example</a>, <a class="code" href="structflecsi_1_1accessor_____3_01data_1_1dense_00_01T_00_01EXCLUSIVE__PERMISSIONS_00_01SHARED__Pe927e95b5549d371feaf66e9ea26f6d3.html">field</a>, <span class="keywordtype">double</span>, sparse, 1, cells);</div><div class="line"></div><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceexample.html">example</a> {</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> initialize_sparse_field(<a class="code" href="structflecsi_1_1data__client__handle__base____.html">mesh&lt;ro&gt;</a> mesh, <a class="code" href="structflecsi_1_1mutator_____3_01data_1_1sparse_00_01T_01_4.html">sparse_field_mutator</a> f) {</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span>(<span class="keyword">auto</span> c: mesh.cells()) {</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> random = (rand()/<span class="keywordtype">double</span>{RAND_MAX}) * 5;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i{0}; i&lt;random; ++i) {</div><div class="line">      <span class="keyword">const</span> <span class="keywordtype">size_t</span> index = (rand()/<span class="keywordtype">double</span>{RAND_MAX}) * 5;</div><div class="line">      f(c,index) = index;</div><div class="line">    } <span class="comment">// for</span></div><div class="line">  } <span class="comment">// for</span></div><div class="line">} <span class="comment">// initialize_pressure</span></div><div class="line"></div><div class="line"><a class="code" href="group__execution.html#ga4dcd75ac370388c816b99672d589c4bc">flecsi_register_task</a>(initialize_sparse_field, <a class="code" href="namespaceexample.html">example</a>, loc, single);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> print_sparse_field(<a class="code" href="structflecsi_1_1data__client__handle__base____.html">mesh&lt;ro&gt;</a> mesh, <a class="code" href="structflecsi_1_1accessor_____3_01data_1_1sparse_00_01T_00_01EXCLUSIVE__PERMISSIONS_00_01SHARED__ea9975ad170d5f9e7f372254d224f9b3.html">sparse_field&lt;ro&gt;</a> f) {</div><div class="line">  <span class="keywordflow">for</span>(<span class="keyword">auto</span> c: mesh.cells()) {</div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> m: f.<a class="code" href="structflecsi_1_1accessor_____3_01data_1_1sparse_00_01T_00_01EXCLUSIVE__PERMISSIONS_00_01SHARED__ea9975ad170d5f9e7f372254d224f9b3.html#a1d3376224efabb9d108b7f35c3b68e32">entries</a>(c)) {</div><div class="line">      std::cout &lt;&lt; f(c,m) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line">    } <span class="comment">// for</span></div><div class="line">    std::cout &lt;&lt; std::endl;</div><div class="line">  } <span class="comment">// for</span></div><div class="line">} <span class="comment">// print_pressure</span></div><div class="line"></div><div class="line"><a class="code" href="group__execution.html#ga4dcd75ac370388c816b99672d589c4bc">flecsi_register_task</a>(print_sparse_field, <a class="code" href="namespaceexample.html">example</a>, loc, single);</div><div class="line"></div><div class="line">} <span class="comment">// namespace example</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceflecsi.html">flecsi</a> {</div><div class="line"><span class="keyword">namespace </span>execution {</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="hpx_2runtime__driver_8h.html#a529faee76b6bf740ce1a013919b3654f">driver</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) {</div><div class="line"></div><div class="line">  <span class="keyword">auto</span> m = <a class="code" href="group__data.html#ga9673dfe687ab0a65683d20689bd9cc46">flecsi_get_client_handle</a>(<a class="code" href="structflecsi_1_1tutorial_1_1specialization__mesh__t.html">mesh_t</a>, clients, mesh);</div><div class="line"></div><div class="line">  {</div><div class="line">  <span class="keyword">auto</span> f = <a class="code" href="group__data.html#ga07598e722b50beb7c7b9ce0e03108143">flecsi_get_mutator</a>(m, <a class="code" href="namespaceexample.html">example</a>, <a class="code" href="structflecsi_1_1accessor_____3_01data_1_1dense_00_01T_00_01EXCLUSIVE__PERMISSIONS_00_01SHARED__Pe927e95b5549d371feaf66e9ea26f6d3.html">field</a>, <span class="keywordtype">double</span>, sparse, 0, 5);</div><div class="line"></div><div class="line">  <a class="code" href="group__execution.html#gafca967e833f6d2dffd7d326c5993964f">flecsi_execute_task</a>(initialize_sparse_field, <a class="code" href="namespaceexample.html">example</a>, single, m, f);</div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">  {</div><div class="line">  <span class="keyword">auto</span> f = <a class="code" href="group__data.html#ga7e528276b2480bd22509e4afd6772bdd">flecsi_get_handle</a>(m, <a class="code" href="namespaceexample.html">example</a>, <a class="code" href="structflecsi_1_1accessor_____3_01data_1_1dense_00_01T_00_01EXCLUSIVE__PERMISSIONS_00_01SHARED__Pe927e95b5549d371feaf66e9ea26f6d3.html">field</a>, <span class="keywordtype">double</span>, sparse, 0);</div><div class="line"></div><div class="line">  <a class="code" href="group__execution.html#gafca967e833f6d2dffd7d326c5993964f">flecsi_execute_task</a>(print_sparse_field, <a class="code" href="namespaceexample.html">example</a>, single, m, f);</div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">} <span class="comment">// driver</span></div><div class="line"></div><div class="line">} <span class="comment">// namespace execution</span></div><div class="line">} <span class="comment">// namespace flecsi</span></div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
