<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="flecsi-favicon.ico" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Interface Documentation: Cinch: Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" height="200" style="margin-top:40px; margin-left:30px; margin-right:10px" src="medium-flecsi.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interface Documentation<br>
		<span id="projectnumber">Version:</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Cinch: Logging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Cinch Logging Utilities (clog)</h2>
<h3>Quick Start</h3>
<p>Configure cmake to enable clog: </p><div class="fragment"><div class="line">$ cmake -DENABLE_CLOG=ON -DCLOG_ENABLE_MPI=ON -DCLOG_ENABLE_TAGS=ON path...</div></div><!-- fragment --><p> <b>The options for MPI and tags are useful, but not necessary.</b> Rebuild the project, and then set the std::clog environment variable: </p><div class="fragment"><div class="line">$ export CLOG_ENABLE_STDLOG=1</div></div><!-- fragment --><p> If your executable uses clog calls, they should now produce output when you run.</p>
<h3>Basic Description</h3>
<p>Cinch has support for trace, info, warn, error, and fatal log reporting (similar to Google Log). There are two interface styles for logging information using clog: Insertion style, e.g.,</p>
<div class="fragment"><div class="line"><a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;This is some information&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>and a method interface, e.g.,</p>
<div class="fragment"><div class="line"><a class="code" href="group__clog.html#ga6ed465236e539609f566c53768f31e62">clog_info</a>(<span class="stringliteral">&quot;This is some information&quot;</span>);</div></div><!-- fragment --><p> A newline character is automatically appended to the method style output.</p>
<p>Both interface styles are available for all severity levels (discussed below). Additionally, both interfaces support streams as messages. For example, the following is legal: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> value{20};</div><div class="line"></div><div class="line"><a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;This is a value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl; <span class="comment">// insertion style</span></div><div class="line"><a class="code" href="group__clog.html#ga6ed465236e539609f566c53768f31e62">clog_info</a>(<span class="stringliteral">&quot;This is a value: &quot;</span> &lt;&lt; value); <span class="comment">// method style</span></div></div><!-- fragment --><p><b>NOTE:</b> clog is automatically available for Cinch unit tests. </p><hr/>
<h3>Runtime Environment Options</h3>
<ul>
<li><p class="startli"><b>CLOG_ENABLE_STDLOG [default UNSET]</b><br />
 This options must be set in the user's environment to enable standard terminal output. Users can set this option like: </p><div class="fragment"><div class="line">% export CLOG_ENABLE_STDLOG=1 (bash)</div><div class="line"></div><div class="line">% setenv CLOG_ENABLE_STDLOG 1 (tcsh)</div></div><!-- fragment --><p> If this option is unset, no output will be directed to the terminal. This does not affect other output streams.</p>
<p class="startli"><b>NOTE:</b> In C++, std::clog is the standard output stream for logging. This is not an extension of clog. The naming is simply an artifact of the shared purpose, as std::clog is consistent with std::cout, and std::cerr. </p><hr/>
</li>
</ul>
<h3>CMake Configuration Options</h3>
<ul>
<li><b>ENABLE_CLOG [default OFF]</b><br />
 This options allows the user to completely disable clog calls such that no overhead is added to the runtime.</li>
<li><b>CLOG_COLOR_OUTPUT [default ON]</b><br />
 This option controls whether or not colorization control characters are embedded in the output stream. If this option is enabled, it is still possible to disable color output for specific output streams as documented below.</li>
<li><b>CLOG_DEBUG [default OFF]</b><br />
 If this option is enabled, additional debugging inforamtion is output to help in diagnosing clog issues. Normal users will not want to enable this option as it produces extremely verbose output.</li>
<li><b>CLOG_ENABLE_EXTERNAL [default OFF]</b><br />
 This option enables output of clog calls that are defined at external or file scope in a translation unit. Clog calls made at this scope cannot be controlled by the runtime as they are executed before the runtime can be initialized. Best practice is to not make externally scoped calls to the clog interface unless you understand what you are doing.</li>
<li><b>CLOG_ENABLE_MPI [default OFF]</b><br />
 This option enables the clog basic MPI interface.</li>
<li><b>CLOG_ENABLE_TAGS [default OFF]</b><br />
 This optino enables the clog tagging feature. Tags allow the user to selectively turn on and off output for specific code sections at runtime. Tags are described in more detail below.</li>
<li><b>CLOG_TAG_BITS [default "64"]</b><br />
 This option determines the number of tags that can be uniquely defined in the code. There is very little performance overhead in setting this to a large number.</li>
<li><b>CLOG_STRIP_LEVEL [default "0"]</b><br />
 The strip level determines which classes of logging are output depending on the severtiy of the message. Each severity level is assigned an integer value. Severity levels with an integer value lower than the strip level are automatically disabled. <hr/>
</li>
</ul>
<h3>Clog Interface Macros</h3>
<p><a class="el" href="group__clog.html#gacb8e73d4a5e6bfa74358b921f68024ac">clog_init(active)</a></p>
<p><a class="el" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog(severity)</a></p>
<p><a class="el" href="group__clog.html#gab13099a313f13dec384052c83ede1206">clog_trace(message)</a></p>
<p><a class="el" href="group__clog.html#ga6ed465236e539609f566c53768f31e62">clog_info(message)</a></p>
<p><a class="el" href="group__clog.html#ga702cb2e9ee2f7b152e28b827f620ff30">clog_warn(message)</a></p>
<p><a class="el" href="group__clog.html#ga233013578c46833646b293888090b8c6">clog_error(message)</a></p>
<p><a class="el" href="group__clog.html#ga295b6b59cd45b57cab6ced3eb8363118">clog_fatal(message)</a></p>
<p><a class="el" href="group__clog.html#ga3c36a88fa4de0fb195675f0665544fdd">clog_assert(test, message)</a></p>
<p><a class="el" href="group__clog.html#ga2159281bddeeb507b78956c5f0cd9922">clog_add_buffer(name, ostream, colorized)</a></p>
<p><a class="el" href="group__clog.html#ga2c70e946cb20165ce360f53002ca285b">clog_enable_buffer(name)</a></p>
<p><a class="el" href="group__clog.html#ga4d090701634bf1c7c5b989ecf9e87104">clog_disable_buffer(name)</a></p>
<p><a class="el" href="group__clog.html#ga40465822fa7dbd972e41b13413d370b0">clog_container(severity, banner, container, delimiter)</a></p>
<p><a class="el" href="group__clog.html#ga4e0046e4dacc123ef39ca1922d1894d3">clog_rank(severity, rank)</a></p>
<p><a class="el" href="group__clog.html#gae050c8d9c452910132dee0484b722b54">clog_set_output_rank(rank)</a></p>
<p><a class="el" href="group__clog.html#gac282ad03e979489cda31de3e3d7dd332">clog_one(severity)</a></p>
<p><a class="el" href="group__clog.html#ga00bfcf759209b113c30d66d2b333a614">clog_container_rank(severity, banner, container, delimiter, rank)</a></p>
<p><a class="el" href="group__clog.html#ga14191095cd89043d102482836ab78298">clog_container_one(severity, banner, container, delimiter)</a></p>
<p>The clog interface is documented in <a href="modules.html">modules</a> if this file is being referenced as part of a project that uses Cinch. </p><hr/>
<h3>Controlling Clog Output: Output Streams</h3>
<p>Clog can write output to multiple output streams at once. Users can control which clog log files and outputs are created by adding and enabling/disabling various output streams. By default, clog directs output to std::clog (this is the default C++ log iostream and is not part of clog) when the <b>CLOG_ENABLE_STDLOG</b> environment variable is defined. Other output streams must be added by the user application. As an example, if the user application wanted clog output to go to a file named <em>output.log</em>, one could do the following:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ofstream&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cinchlog_8h.html">cinchlog.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="hpx_2runtime__main_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) {</div><div class="line"></div><div class="line">  <span class="comment">// Initialize clog with output for all tag groups (discussed below)</span></div><div class="line">  <a class="code" href="group__clog.html#gacb8e73d4a5e6bfa74358b921f68024ac">clog_init</a>(<span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Open an output stream for &quot;output.log&quot;</span></div><div class="line">  std::ofstream output(<span class="stringliteral">&quot;output.log&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Add the stream to clog:</span></div><div class="line">  <span class="comment">// param 1 (&quot;output&quot;) The string name of the buffer.</span></div><div class="line">  <span class="comment">// param 2 (output)   The stream (clog will call stream.rdbuf() on this).</span></div><div class="line">  <span class="comment">// param 3 (false)    A boolean denoting whether or not the buffer</span></div><div class="line">  <span class="comment">//                    supports colorization.</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// Note that output is automatically enabled for buffers when they</span></div><div class="line">  <span class="comment">// are added. Buffers can be disable with clog_disable_buffer(string name),</span></div><div class="line">  <span class="comment">// and re-enabled with clog_enable_buffer(string name).</span></div><div class="line">  <a class="code" href="group__clog.html#ga2159281bddeeb507b78956c5f0cd9922">clog_add_buffer</a>(<span class="stringliteral">&quot;output&quot;</span>, output, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Write some information to the output file (and to std::clog if enabled)</span></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;This will go to output.log&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// main</span></div></div><!-- fragment --> <hr/>
<h3>Controlling Clog Output: Severity Levels</h3>
<p>Clog output can be controlled at compile time by specifying a particular severity level. Any logging messages with a lower severity level than the one specified by <b>CLOG_STRIP_LEVEL</b> will be disabled. Note that this implies that clog will produce no output for <b>CLOG_STRIP_LEVEL &gt;= 5</b>. However, a strip level of &gt;= 5 does not completely remove overhead created by clog. Fatal errors and assertions will still be executed, although no output will be generated.</p>
<p>The different severity levels have the following behavior:</p>
<ul>
<li><b>trace</b><br />
 Enabled only for severity level 0 (less than 1) Trace output is suitable for fine-grained logging information.</li>
<li><b>info</b><br />
 Enabled for severity levels less than 2 Info output is suitable for normal logging information.</li>
<li><b>warn</b><br />
 Enabled for severity levels less than 3 Warn output is useful for issuing warnings. When <b>CLOG_COLOR_OUTPUT</b> is enabled, warn messages will be displayed in yellow.</li>
<li><b>error</b><br />
 Enabled for severity levels less than 4 Error output is useful for issuing non-fatal errors. When <b>CLOG_COLOR_OUTPUT</b> is enabled, error messages will be displayed in red.</li>
<li><b>fatal</b><br />
 Enabled for severity levels less than 5 Fatal error output is useful for issuing fatal errors. Fatal errors print a message, dump the current stack trace, and call std::exit(1). When <b>CLOG_COLOR_OUTPUT</b> is enabled, fatal messages will be displayed in red. <hr/>
</li>
</ul>
<h3>Controlling Clog Output: Tag Groups</h3>
<p>Runtime control of clog output is possible by adding scoping sections in the source code. These are referred to as <em>tag groups</em> because the scoped section is labeled with a tag. The number of possible tag groups is controlled by <b>CLOG_TAG_BITS</b> (default 64). Tag groups can be enabled or disabled at runtime by specifying the list of tag groups to the <em>clog_init</em> function. Generally, these are controlled by a command-line flag that is interpreted by the user's application. Here is an example code using GFlags to control output:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;gflags/gflags.h&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Create a command-line flag &quot;--groups&quot; with default value &quot;all&quot;</span></div><div class="line">DEFINE_string(groups, <span class="stringliteral">&quot;all&quot;</span>, <span class="stringliteral">&quot;Specify the active tag groups&quot;</span>);</div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cinchlog_8h.html">cinchlog.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="hpx_2runtime__main_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) {</div><div class="line"></div><div class="line">  <span class="comment">// Parse the command-line arguments</span></div><div class="line">  gflags::ParseCommandLineFlags(&amp;argc, &amp;argv, <span class="keyword">true</span>);</div><div class="line"></div><div class="line">  <span class="comment">// If the user has specified tag groups with --groups=group1, ...</span></div><div class="line">  <span class="comment">// these groups will be enabled. Recall that the default is &quot;all&quot;.</span></div><div class="line">  <a class="code" href="group__clog.html#gacb8e73d4a5e6bfa74358b921f68024ac">clog_init</a>(FLAGS_groups);</div><div class="line"></div><div class="line">  {</div><div class="line">  <span class="comment">// Create a new tag scope. Log messages within this scope will</span></div><div class="line">  <span class="comment">// only be output if tag group &quot;tag1&quot; or tag group &quot;all&quot; is enabled.</span></div><div class="line">  clog_tag_scope(tag1);</div><div class="line"></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;Enabled for tag group tag1&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(warn) &lt;&lt; <span class="stringliteral">&quot;This is a warning in group tag1&quot;</span> &lt;&lt; std::endl;</div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">  {</div><div class="line">  <span class="comment">// Create a new tag scope. Log messages within this scope will</span></div><div class="line">  <span class="comment">// only be output if tag group &quot;tag2&quot; or tag group &quot;all&quot; is enabled.</span></div><div class="line">  clog_tag_scope(tag2);</div><div class="line"></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;Enabled for tag group tag2&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(error) &lt;&lt; <span class="stringliteral">&quot;This is an error in group tag2&quot;</span> &lt;&lt; std::endl;</div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">  <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;This output is not scoped&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// main</span></div></div><!-- fragment --><p>Example code runs:</p>
<div class="fragment"><div class="line">% ./example --groups=tag1</div><div class="line">% [I1225 11:59:59 example.cc:22] Enabled for tag group tag1</div><div class="line">% [W1225 11:59:59 example.cc:24] This is a warning in group tag1</div><div class="line">% [I1225 11:59:59 example.cc:37] This output is not scoped</div><div class="line"></div><div class="line">% ./example --groups=tag2</div><div class="line">% [I1225 11:59:59 example.cc:32] Enabled for tag group tag1</div><div class="line">% [E1225 11:59:59 example.cc:34] This is an error in group tag2</div><div class="line">% [I1225 11:59:59 example.cc:37] This output is not scoped</div><div class="line"></div><div class="line">% ./example</div><div class="line">% [I1225 11:59:59 example.cc:22] Enabled for tag group tag1</div><div class="line">% [W1225 11:59:59 example.cc:24] This is a warning in group tag1</div><div class="line">% [I1225 11:59:59 example.cc:32] Enabled for tag group tag1</div><div class="line">% [E1225 11:59:59 example.cc:34] This is an error in group tag2</div><div class="line">% [I1225 11:59:59 example.cc:37] This output is not scoped</div></div><!-- fragment --> <hr/>
<h3>Advanced Topics: Predicated Output</h3>
<p>The normal clog interface is implemented through a set of macros. Advanced users, who need greater control over clog, can create their own interfaces (macro or otherwise) to directly access the low-level clog interface. Log messages in clog derive from the <em><a class="el" href="structcinch_1_1log__message__t.html">cinch::log_message_t</a></em> type, which provides a constructor, virtual destructor, and a virtual stream method:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> P&gt;</div><div class="line"><span class="keyword">struct </span>log_message_t</div><div class="line">{</div><div class="line"></div><div class="line">  <span class="comment">// Constructor:</span></div><div class="line">  <span class="comment">// param 1 (file)      The originating file of the message (__FILE__)</span></div><div class="line">  <span class="comment">// param 2 (line)      The originating line of the mesasge (__LINE__)</span></div><div class="line">  <span class="comment">// param 3 (predicate) A predicate function that can be used to</span></div><div class="line">  <span class="comment">//                     control output.</span></div><div class="line">  log_message_t(</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> * file,</div><div class="line">    <span class="keywordtype">int</span> line,</div><div class="line">    P &amp;&amp; predicate</div><div class="line">  )</div><div class="line">  {</div><div class="line">    <span class="comment">// See cinchlog.h for implementation.</span></div><div class="line">  } <span class="comment">// log_message_t</span></div><div class="line"></div><div class="line">  <span class="comment">// Destructor.</span></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  ~log_message_t()</div><div class="line">  {</div><div class="line">    <span class="comment">// See cinchlog.h for implementation.</span></div><div class="line">  } <span class="comment">// ~log_message_t</span></div><div class="line"></div><div class="line">  <span class="comment">// Stream method.</span></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  std::ostream &amp;</div><div class="line">  stream()</div><div class="line">  {</div><div class="line">    <span class="comment">// See cinchlog.h for implementation.</span></div><div class="line">  } <span class="comment">// stream</span></div><div class="line"></div><div class="line">}; <span class="comment">// struct log_message_t</span></div></div><!-- fragment --><p>Users wishing to customize clog can change the default behavior by overriding the virtual methods of this type, and by providing custom predicates. Much of the basic clog functionality is implemented in this manner, e.g., the following code implements the trace level severity output:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define severity_message_t(severity, P, format)                                \</span></div><div class="line"><span class="preprocessor">struct severity ## _log_message_t                                              \</span></div><div class="line"><span class="preprocessor">  : public log_message_t&lt;P&gt;                                                    \</span></div><div class="line"><span class="preprocessor">{                                                                              \</span></div><div class="line"><span class="preprocessor">  severity ## _log_message_t(                                                  \</span></div><div class="line"><span class="preprocessor">    const char * file,                                                         \</span></div><div class="line"><span class="preprocessor">    int line,                                                                  \</span></div><div class="line"><span class="preprocessor">    P &amp;&amp; predicate = true_state)                                               \</span></div><div class="line"><span class="preprocessor">    : log_message_t&lt;P&gt;(file, line, predicate) {}                               \</span></div><div class="line"><span class="preprocessor">                                                                               \</span></div><div class="line"><span class="preprocessor">  ~severity ## _log_message_t()                                                \</span></div><div class="line"><span class="preprocessor">  {                                                                            \</span></div><div class="line"><span class="preprocessor">    </span><span class="comment">/* Clean colors from the stream */</span><span class="preprocessor">                                         \</span></div><div class="line"><span class="preprocessor">    clog_t::instance().stream() &lt;&lt; COLOR_PLAIN;                                \</span></div><div class="line"><span class="preprocessor">  }                                                                            \</span></div><div class="line"><span class="preprocessor">                                                                               \</span></div><div class="line"><span class="preprocessor">  std::ostream &amp;                                                               \</span></div><div class="line"><span class="preprocessor">  stream() override                                                            \</span></div><div class="line"><span class="preprocessor">    </span><span class="comment">/* This is replaced by the scoped logic */</span><span class="preprocessor">                                 \</span></div><div class="line"><span class="preprocessor">    format                                                                     \</span></div><div class="line"><span class="preprocessor">};</span></div><div class="line"></div><div class="line"><span class="comment">//----------------------------------------------------------------------------//</span></div><div class="line"><span class="comment">// Define the insertion style severity levels.</span></div><div class="line"><span class="comment">//----------------------------------------------------------------------------//</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define message_stamp \</span></div><div class="line"><span class="preprocessor">  timestamp() &lt;&lt; &quot; &quot; &lt;&lt; rstrip&lt;&#39;/&#39;&gt;(file_) &lt;&lt; &quot;:&quot; &lt;&lt; line_</span></div><div class="line"></div><div class="line">severity_message_t(trace, decltype(cinch::true_state),</div><div class="line">  {</div><div class="line"><span class="preprocessor">#if CLOG_STRIP_LEVEL &lt; 1</span></div><div class="line">    <span class="keywordflow">if</span>(clog_t::instance().tag_enabled() &amp;&amp; predicate_()) {</div><div class="line">      std::ostream &amp; stream = clog_t::instance().stream();</div><div class="line">      stream &lt;&lt; OUTPUT_CYAN(<span class="stringliteral">&quot;[T&quot;</span>) &lt;&lt; OUTPUT_LTGRAY(message_stamp);</div><div class="line">      stream &lt;&lt; OUTPUT_CYAN(<span class="stringliteral">&quot;] &quot;</span>);</div><div class="line">      <span class="keywordflow">return</span> stream;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> {</div><div class="line">      <span class="keywordflow">return</span> clog_t::instance().null_stream();</div><div class="line">    } <span class="comment">// if</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    <span class="keywordflow">return</span> clog_t::instance().null_stream();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">  });</span></div></div><!-- fragment --><p>Interested users should look at the Doxygen <a href="modules.html">documentation</a> and source code for more examples. </p><hr/>
<h3>Full Example</h3>
<p>Full example using Boost program options:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;boost/program_options.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Uncomment these to enable color output and tags</span></div><div class="line"><span class="comment">// #define CLOG_COLOR_OUTPUT </span></div><div class="line"><span class="comment">// #define CLOG_ENABLE_TAGS</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cinchlog_8h.html">cinchlog.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceboost_1_1program__options.html">boost::program_options</a>;</div><div class="line"></div><div class="line">clog_register_tag(tag1);</div><div class="line">clog_register_tag(tag2);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="hpx_2runtime__main_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) {</div><div class="line"></div><div class="line">  <span class="comment">// Initialize tags to output all tag groups from clog</span></div><div class="line">  std::string tags(<span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Create program options object</span></div><div class="line">  options_description desc(<span class="stringliteral">&quot;Cinch test options&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Add command-line options</span></div><div class="line">  desc.add_options()</div><div class="line">    (<span class="stringliteral">&quot;help,h&quot;</span>, <span class="stringliteral">&quot;Print this message and exit.&quot;</span>)</div><div class="line">    (<span class="stringliteral">&quot;tags,t&quot;</span>, value(&amp;tags)-&gt;implicit_value(<span class="stringliteral">&quot;0&quot;</span>),</div><div class="line">      <span class="stringliteral">&quot;Enable the specified output tags, e.g., --tags=tag1,tag2.&quot;</span></div><div class="line">      <span class="stringliteral">&quot; Passing --tags by itself will print the available tags.&quot;</span>)</div><div class="line">    ;</div><div class="line">  variables_map vm;</div><div class="line">  parsed_options parsed =</div><div class="line">    command_line_parser(argc, argv).options(desc).allow_unregistered().run();</div><div class="line">  store(parsed, vm);</div><div class="line"></div><div class="line">  notify(vm);</div><div class="line"></div><div class="line">  <span class="comment">// Output help message</span></div><div class="line">  <span class="keywordflow">if</span>(vm.count(<span class="stringliteral">&quot;help&quot;</span>)) {</div><div class="line">    std::cout &lt;&lt; desc &lt;&lt; std::endl;</div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Test tags</span></div><div class="line">  <span class="keywordflow">if</span>(tags == <span class="stringliteral">&quot;0&quot;</span>) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Available tags (clog):&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> t: clog_tag_map()) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.first &lt;&lt; std::endl;</div><div class="line">    } <span class="comment">// for</span></div><div class="line">  }</div><div class="line">  <span class="keywordflow">else</span> {</div><div class="line">    <span class="comment">// Initialize clog runtime</span></div><div class="line">    <a class="code" href="group__clog.html#gacb8e73d4a5e6bfa74358b921f68024ac">clog_init</a>(tags);</div><div class="line">  } <span class="comment">// if</span></div><div class="line"></div><div class="line">  {</div><div class="line">    clog_tag_guard(tag1);</div><div class="line"></div><div class="line">    <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;In tag guard for tag1&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> i{0}; i&lt;10; ++i) {</div><div class="line">      <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(info) &lt;&lt; <span class="stringliteral">&quot;i: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</div><div class="line">    } <span class="comment">// for</span></div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">  {</div><div class="line">    clog_tag_guard(tag2);</div><div class="line"></div><div class="line">    <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(trace) &lt;&lt; <span class="stringliteral">&quot;In tag guard for tag2&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> i{0}; i&lt;10; ++i) {</div><div class="line">      <a class="code" href="group__clog.html#ga70996b1fb9c327c7a7a9b1c4656e22e9">clog</a>(trace) &lt;&lt; <span class="stringliteral">&quot;i: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</div><div class="line">    } <span class="comment">// for</span></div><div class="line">  } <span class="comment">// scope</span></div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// main</span></div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
