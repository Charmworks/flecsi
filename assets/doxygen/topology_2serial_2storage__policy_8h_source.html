<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="flecsi-favicon.ico" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Interface Documentation: /home/flecsi/flecsi/flecsi/topology/serial/storage_policy.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" height="200" style="margin-top:40px; margin-left:30px; margin-right:10px" src="medium-flecsi.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interface Documentation<br>
		<span id="projectnumber">Version:</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_688c864b7b93022ab3a371d21adf78fb.html">flecsi</a></li><li class="navelem"><a class="el" href="dir_fa984fdc1f8d7593d1791a3e6fdaa211.html">topology</a></li><li class="navelem"><a class="el" href="dir_b015c4bf9492c2e31582a6a7c077894b.html">serial</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">storage_policy.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="topology_2serial_2storage__policy_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*~--------------------------------------------------------------------------~*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2015 Los Alamos National Security, LLC</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *~--------------------------------------------------------------------------~*/</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#ifndef flecsi_topology_serial_topology_storage_policy_h</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#define flecsi_topology_serial_topology_storage_policy_h</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mesh__storage_8h.html">flecsi/topology/mesh_storage.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data__client_8h.html">flecsi/data/data_client.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mesh__utils_8h.html">flecsi/topology/mesh_utils.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="array__ref_8h.html">flecsi/utils/array_ref.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="reorder_8h.html">flecsi/utils/reorder.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;flecsi/topology/index_space.h&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceflecsi.html">flecsi</a> {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">namespace </span>topology {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">class </span>mesh_entity_base_;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">template</span>&lt;<span class="keywordtype">size_t</span>, <span class="keywordtype">size_t</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classserial__data__handle__policy__t.html">   34</a></span>&#160;<span class="keyword">class </span>mesh_entity_t;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> ND, <span class="keywordtype">size_t</span> NM&gt;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structflecsi_1_1topology_1_1serial__topology__storage__policy__t.html">   42</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structflecsi_1_1topology_1_1serial__topology__storage__policy__t.html">serial_topology_storage_policy_t</a></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  </div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">using</span> <a class="code" href="classflecsi_1_1utils_1_1id__.html">id_t</a> = <a class="code" href="classflecsi_1_1utils_1_1id__.html">utils::id_t</a>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">using</span> index_spaces_t = </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    std::array&lt;<a class="code" href="classflecsi_1_1topology_1_1index__space.html">index_space</a>&lt;<a class="code" href="classflecsi_1_1topology_1_1mesh__entity__base__.html">mesh_entity_base_</a>*, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">void</span><span class="comment">/*, entity_storage_t*/</span>&gt;, ND + 1&gt;;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// array of array of domain_connectivity</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  std::array&lt;std::array&lt;domain_connectivity&lt;ND&gt;, NM&gt;, NM&gt; topology;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  std::array&lt;index_spaces_t, NM&gt; index_spaces;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">template</span>&lt;<span class="keywordtype">size_t</span> D, <span class="keywordtype">size_t</span> N&gt;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">size_t</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  entity_dimension(<a class="code" href="classflecsi_1_1topology_1_1mesh__entity__t.html">mesh_entity_t&lt;D, N&gt;</a>*)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> D;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class </span>T, <span class="keywordtype">size_t</span> M = 0, <span class="keyword">class</span>... S&gt;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  T * make(S &amp;&amp;... args)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    T* ent;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">size_t</span> dim = entity_dimension(ent);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ent = <span class="keyword">new</span> T(std::forward&lt;S&gt;(args)...);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">using</span> dtype = <a class="code" href="classflecsi_1_1topology_1_1domain__entity.html">domain_entity&lt;M, T&gt;</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">auto</span> &amp; is = index_spaces[M][dim].template cast&lt;dtype&gt;();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classflecsi_1_1utils_1_1id__.html">id_t</a> global_id = id_t::make&lt;M&gt;(dim, is.size());</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">auto</span> typed_ent = <span class="keyword">static_cast&lt;</span><a class="code" href="classflecsi_1_1topology_1_1mesh__entity__base__t.html">mesh_entity_base_t&lt;NM&gt;</a>*<span class="keyword">&gt;</span>(ent);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    typed_ent-&gt;template set_global_id&lt;M&gt;(global_id);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    is.push_back(ent);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> ent;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  } <span class="comment">// make</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}; <span class="comment">// class serial_topology_storage_policy_t</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;} <span class="comment">// namespace topology</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;} <span class="comment">// namespace flecsi</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#endif // flecsi_topology_serial_topology_storage_policy_h</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/*~-------------------------------------------------------------------------~-*</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * Formatting options for vim.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * vim: set tabstop=2 shiftwidth=2 expandtab :</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> *~-------------------------------------------------------------------------~-*/</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="ttc" id="mesh__utils_8h_html"><div class="ttname"><a href="mesh__utils_8h.html">mesh_utils.h</a></div></div>
<div class="ttc" id="classflecsi_1_1topology_1_1mesh__entity__t_html"><div class="ttname"><a href="classflecsi_1_1topology_1_1mesh__entity__t.html">flecsi::topology::mesh_entity_t</a></div><div class="ttdoc">mesh_entity_t parameterizes a mesh entity base with its dimension and number of domains ...</div><div class="ttdef"><b>Definition:</b> storage_policy.h:31</div></div>
<div class="ttc" id="classflecsi_1_1utils_1_1id___html"><div class="ttname"><a href="classflecsi_1_1utils_1_1id__.html">flecsi::utils::id_</a></div><div class="ttdef"><b>Definition:</b> id.h:33</div></div>
<div class="ttc" id="classflecsi_1_1topology_1_1index__space_html"><div class="ttname"><a href="classflecsi_1_1topology_1_1index__space.html">flecsi::topology::index_space</a></div><div class="ttdoc">index_space provides a compile-time configurable and iterable container of objects, e.g. mesh/tree topology entities and their id&amp;#39;s. Index space defines the concept of STORAGE - whether the actual entities referenced are stored within this index space OR contained in a &amp;#39;master&amp;#39; index space. OWNERSHIP - whether its set of id&amp;#39;s are owned by this index space or aliased to another index space and then mustcbe copied before this index space can then modify them. SORTED - refers to if the id&amp;#39;s are sorted and can then have set operations directly applied to them, else the index space must first be sorted. To make operations on index spaces faster, the index space is parameterized on a number of these parameters and can be efficiently recast depending on how it is to be used: STORAGE - if true then this is a &amp;#39;master&amp;#39; index space with its own storage. OWNED - if true then id ownership is definitely true, else must check owned_ at runtime. SORTED - if true then id&amp;#39;s are definitely stored and shall remain in sorted order. </div><div class="ttdef"><b>Definition:</b> index_space.h:57</div></div>
<div class="ttc" id="classflecsi_1_1topology_1_1domain__entity_html"><div class="ttname"><a href="classflecsi_1_1topology_1_1domain__entity.html">flecsi::topology::domain_entity</a></div><div class="ttdoc">domain_entity is a simple wrapper to mesh entity that associates with it a domain id ...</div><div class="ttdef"><b>Definition:</b> mesh_types.h:225</div></div>
<div class="ttc" id="mesh__storage_8h_html"><div class="ttname"><a href="mesh__storage_8h.html">mesh_storage.h</a></div></div>
<div class="ttc" id="classflecsi_1_1topology_1_1mesh__entity__base___html"><div class="ttname"><a href="classflecsi_1_1topology_1_1mesh__entity__base__.html">flecsi::topology::mesh_entity_base_</a></div><div class="ttdef"><b>Definition:</b> mesh_types.h:101</div></div>
<div class="ttc" id="classflecsi_1_1topology_1_1mesh__entity__base__t_html"><div class="ttname"><a href="classflecsi_1_1topology_1_1mesh__entity__base__t.html">flecsi::topology::mesh_entity_base_t</a></div><div class="ttdoc">mesh_entity_base_t defines a base class that stores the raw info that the mesh topology needs...</div><div class="ttdef"><b>Definition:</b> mesh_types.h:107</div></div>
<div class="ttc" id="structflecsi_1_1topology_1_1serial__topology__storage__policy__t_html"><div class="ttname"><a href="structflecsi_1_1topology_1_1serial__topology__storage__policy__t.html">flecsi::topology::serial_topology_storage_policy_t</a></div><div class="ttdef"><b>Definition:</b> storage_policy.h:42</div></div>
<div class="ttc" id="array__ref_8h_html"><div class="ttname"><a href="array__ref_8h.html">array_ref.h</a></div><div class="ttdoc">A reference array to avoid a million overloads. </div></div>
<div class="ttc" id="data__client_8h_html"><div class="ttname"><a href="data__client_8h.html">data_client.h</a></div></div>
<div class="ttc" id="reorder_8h_html"><div class="ttname"><a href="reorder_8h.html">reorder.h</a></div></div>
<div class="ttc" id="namespaceflecsi_html"><div class="ttname"><a href="namespaceflecsi.html">flecsi</a></div><div class="ttdef"><b>Definition:</b> adjacency_types.h:14</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
