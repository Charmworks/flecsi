<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="flecsi-favicon.ico" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Interface Documentation: FleCSI: Build</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" height="200" style="margin-top:40px; margin-left:30px; margin-right:10px" src="medium-flecsi.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interface Documentation<br>
		<span id="projectnumber">Version:</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FleCSI: Build </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Building FleCSI</h1>
<p>FleCSI can be configured to run with different distributed-memory runtimes, including Legion, and MPI. FleCSI also has support for various fine-grained, node-level runtimes, including OpenMP, Kokkos, Agency, and the C++17 extensions for parallelism. Full documentation of FleCSI requires both Pandoc and Doxygen. These configuration options are listed to convey to the reader that the FleCSI build system has several paths that can be taken to tailor FleCSI to a given system and architecture.</p>
<h2>Requirements &amp; Prerequisites</h2>
<p>The following list of requirements provides a complete set of build options, but is not necessary for a particular build:</p>
<ul>
<li><b>C++14 compliant compiler</b><br />
 At the current time, FleCSI has been tested with GNU, Clang, and Intel C++ compilers.</li>
<li><b>MPI</b><br />
 If Legion support is enabled, the MPI implementation must have support for <em>MPI_THREAD_MULTIPLE</em>.</li>
<li><b>Legion</b><br />
 We are currently using the most up-to-date version of the master branch.</li>
<li><b>GASNet</b><br />
 GASNet is only required if Legion support is enabled.</li>
<li><b>Pandoc</b><br />
 Pandoc is only required to build the FleCSI guide documentation. Pandoc is a format conversion tool. More information is available at <a href="http://pandoc.org">http://pandoc.org</a>.</li>
<li><b>Doxygen</b><br />
 Doxygen is only required to build the interface documentation.</li>
<li><b>CMake</b><br />
 We currently require CMake version 2.8 or greater.</li>
<li><b>Python</b><br />
 We currently require Python 2.7 or greater.</li>
</ul>
<h2>FleCSI Third Party Libraries Project</h2>
<p>To facilitate FleCSI adoption by a broad set of users, we have provided a superbuild project that can build many of the libraries and tools required to build and use FleCSI. The FleCSI Third Party Libraries (TPL) project is available from github at <a href="https://github.com/laristra/flecsi-third-party">https://github.com/laristra/flecsi-third-party</a>. Note that a suitable version of MPI is required for the superbuild.</p>
<p><b>Admonishment: Users should note that, while this approach is easier, it may not provide as robust a solution as individually building each dependency, and that care should be taken before installing these libraries on a production system to avoid possible conflicts or duplication. Production deployments of some of these tools may have architecture or system specific needs that will not be met by our superbuild. Users who are working with development branches of FleCSI are encouraged to build each package separately.</b></p>
<p>Build instructions for the TPLs: </p><div class="fragment"><div class="line">$ git clone --recursive https://github.com/laristra/flecsi-third-party.git</div><div class="line">$ cd flecsi-third-party</div><div class="line">$ mkdir build</div><div class="line">$ cd build</div><div class="line">$ cmake -DCMAKE_INSTALL_PREFIX=/path/to/install/directory ..</div><div class="line">$ make</div></div><!-- fragment --><p> The <em>make</em> command will also install the TPLs in the specified install directory. <b>It is recommended that users remove the install directory before updating or re-compiling the TPLs.</b></p>
<h2>Build Environment</h2>
<p>FleCSI uses CMake as part of its build system. A convenient mechanism for identifying directory paths that should be searched by CMake's <em>find_package</em> function is to set the <em>CMAKE_PREFIX_PATH</em> environment variable. If you are using the FleCSI TPLs discussed above, you can set <em>CMAKE_PREFIX_PATH</em> to include the path to your TPL installation directory and FleCSI will automatically find all of its dependencies: </p><div class="fragment"><div class="line">$ export CMAKE_PREFIX_PATH=/path/to/install/directory (bash)</div></div><!-- fragment --><h2>Getting The Code</h2>
<p>Clone the FleCSI git repository, and create an out-of-source build area (FleCSI prohibits in-source builds): </p><div class="fragment"><div class="line">$ git clone --recursive https://github.com/laristra/flecsi.git</div><div class="line">$ cd flecsi</div><div class="line">$ mkdir build</div><div class="line">$ cd build</div></div><!-- fragment --><p> <b>Note: FleCSI developers, i.e., those who have permission to create new branches and pull requests, should clone the source code using their github account and the <em>git</em> user:</b> </p><div class="fragment"><div class="line">$ git clone --recursive git@github.com:laristra/flecsi.git</div><div class="line">$ cd flecsi</div><div class="line">$ mkdir build</div><div class="line">$ cd build</div></div><!-- fragment --><h2>Configuration &amp; Build</h2>
<p>Configuration of FleCSI requires the selection of the backend runtimes that will be used by the FleCSI programming model abstraction to invoke tasks and kernels. There are currently two supported distributed-memory runtimes, a serial runtime, and one supported node-level runtime:</p>
<ul>
<li><b>Distributed-Memory</b><br />
 Legion or MPI</li>
<li><b>Serial [supported thorugh MPI runtime]</b><br />
 <b>The serial build is no longer supported.</b> Users wishing to emulate this build mode should select the MPI runtime and run executables with a single-rank.</li>
<li><b>Node-Level</b><br />
 OpenMP</li>
</ul>
<p>Example configuration: <b>MPI</b> </p><div class="fragment"><div class="line">$ cmake -DFLECSI_RUNTIME_MODEL=mpi -DENABLE_MPI -DENABLE_COLORING ..</div></div><!-- fragment --><p> Example configuration: <b>MPI + OpenMP</b> </p><div class="fragment"><div class="line">$ cmake -DFLECSI_RUNTIME_MODEL=mpi -DENABLE_MPI -DENABLE_COLORING -DENABLE_OPENMP ..</div></div><!-- fragment --><p> Example configuration: <b>Legion</b> </p><div class="fragment"><div class="line">$ cmake -DFLECSI_RUNTIME_MODEL=legion -DENABLE_MPI -DENABLE_COLORING ..</div></div><!-- fragment --><p> After configuration is complete, just use <em>make</em> to build: </p><div class="fragment"><div class="line">$ make -j 16</div></div><!-- fragment --><p> This will build all targets <em>except</em> for the Doxygen documentation, which can be built with: </p><div class="fragment"><div class="line">$ make doxygen</div></div><!-- fragment --><p> Installation uses the normal <em>make install</em>, and will install FleCSI in the directory specified by CMAKE_INSTALL_PREFIX: </p><div class="fragment"><div class="line">$ make install</div></div><!-- fragment --><h2>CMake Configuration Options</h2>
<p>The following set of options are available to control how FleCSI is built.</p>
<ul>
<li><b>BUILD_SHARED_LIBS [default: ON]</b><br />
 Build shared library objects (as opposed to static).</li>
<li><b>CMAKE_BUILD_TYPE [default: Debug]</b><br />
 Specify the build type (configuration) statically for this build tree. Possible choices are <em>Debug</em>, <em>Release</em>, <em>RelWithDebInfo</em>, and <em>MinSizeRel</em>.</li>
<li><b>CMAKE_INSTALL_PREFIX [default: /usr/local]</b><br />
 Specify the installation path to use when <em>make install</em> is invoked.</li>
<li><b>CXX_CONFORMANCE_STANDARD [default: c++14]</b><br />
 Specify to which C++ standard a compiler must conform. This is a developer option used to identify whether or not the selected C++ compiler will be able to compile FleCSI, and which (if any) tests it fails to compile. This information can be shared with vendors to identify features that are required by FleCSI that are not standards-compliant in the vendor's compiler.</li>
<li><b>ENABLE_BOOST_PREPROCESSOR [default: ON]</b><br />
 Boost.Preprocessor is a header-only Boost library that provides enhanced pre-processor options and manipulation, which are not supported by the standard C preprocessor. Currently, FleCSI uses the preprocessor to implement type reflection.</li>
<li><b>ENABLE_BOOST_PROGRAM_OPTIONS [default: OFF]</b><br />
 Boost.Program_options provides support for handling command-line options to a program. When this build option is enabled, CMake will attempt to locate a valid installation of the program options library, and Cinch will enable certain command-line options for unit tests. In particular, if Cinch's clog extensions are enabled, the <em>&ndash;tags</em> command-line option will be available to select output tags.</li>
<li><b>ENABLE_CINCH_DEVELOPMENT [default: OFF]</b><br />
 If this option is enabled, extra information will be generated to help debug different Cinch behaviors. Currenlty, this only affects the generation of documentation: when enabled, the resulting PDF documentation will be annotated with the original locations of the content. <b>FIXME: We should consider renaming this option</b></li>
<li><b>ENABLE_CINCH_VERBOSE [default: OFF]</b><br />
 If this option is enabled, extra information will be output during the CMake configuration and build that may be helpful in debugging Cinch.</li>
<li><b>ENABLE_CLOG [default: OFF]</b><br />
 Enable Cinch Logging (clog). The Cinch logging interface provides methods for generating and controlling output from a running application.</li>
<li><b>CLOG_COLOR_OUTPUT [default: ON]</b><br />
 Enable colorization of clog output.</li>
<li><b>CLOG_DEBUG [default: OFF]</b><br />
 Enable verbose debugging output for clog.</li>
<li><b>CLOG_ENABLE_EXTERNAL [default: OFF]</b><br />
 The Cinch clog facility is a runtime. As such, some of the features provided by clog require initialization. Because of the C++ mechanism used by clog to implement parts of its interface, it is possible to call the interface from parts of the code that are <em>external</em>, i.e., at file scope. Externally scoped statements are executed before the clog runtime can be initialized, and therefore their output cannot be controlled by the clog tagging feature. This option allows the user to enable this type of output, which can be quite verbose.</li>
<li><b>CLOG_ENABLE_TAGS [default: OFF]</b><br />
 Enable the tag feature for clog. If enabled, users can selectively control clog output by specifying active tags on the command line: <div class="fragment"><div class="line">$ ./executable --tags=tag1,tag2</div></div><!-- fragment --> Invoking the <em>&ndash;tags</em> flag with no arguments will list the available tags. <b>This option requries that ENABLE_BOOST_PROGRAM_OPTIONS be ON.</b></li>
<li><b>CLOG_STRIP_LEVEL [default: 0]</b><br />
 Strip levels are another mechanism to allow the user to control the amount of output that is generated by clog. In general, the higher the stip level, the fewer the number of clog messages that will be output. There are five strip levels in clog: <em>trace</em>, <em>info</em>, <em>warn</em>, <em>error</em>, and <em>fatal</em>. Output for all of these levels is turned on if the strip level is 0. As the strip level is increased, fewer levels are output, e.g., if the strip level is 3, only <em>error</em> and <em>fatal</em> log messages will be output. <b>Regardless of the strip level, clog messages that are designated <em>fatal</em> will generate a runtime error and will invoke std::exit.</b></li>
<li><b>ENABLE_COLORING [default: OFF]</b><br />
 This option controls whether or not various library dependencies and code sections are active that are required for graph partitioning (coloring) and distributed-memory parallelism. In general, if you have selected a runtime mode that requires this option, it will automatically be enabled.</li>
<li><b>ENABLE_COLOR_UNIT_TESTS [default: OFF]</b><br />
 Enable coloraization of unit test output.</li>
<li><b>ENABLE_COVERAGE_BUILD [default: OFF]</b><br />
 Enable build mode to determine the code coverage of the current set of unit tests. This is useful for continuous integration (CI) test analysis.</li>
<li><b>ENABLE_DEVEL_TARGETS [default: OFF]</b><br />
 Development targets allow developers to add small programs to the FleCSI source code for testing code while it is being developed. These programs are not intended to be used as unit tests, and may be added or removed as the code evolves.</li>
<li><b>ENABLE_DOCUMENTATION [default: OFF]</b><br />
 This option controls whether or not the FleCSI user and developer guide documentation is built. If enabled, CMake will generate these guides as PDFs in the <em>doc</em> subdirectory of the build.</li>
<li><b>ENABLE_DOXYGEN [default: OFF]</b><br />
 If enabled, CMake will verify that a suitable <em>doxygen</em> binary is available on the system, and will add a target for generating Doxygen-style interface documentation from the FleCSI source code. <b>To build the doxygen documentation, users must explicitly invoke:</b> <div class="fragment"><div class="line">$ make doxygen</div></div><!-- fragment --></li>
<li><b>ENABLE_DOXYGEN_WARN [default: OFF]</b><br />
 Normal Doxygen output produces many pages worth of warnings. These are distracting and overly verbose. As such, they are disabled by default. This options allows the user to turn them back on.</li>
<li><b>ENABLE_EXODUS [default: OFF]</b><br />
 If enabled, CMake will verify that a suitable Exodus library is available on the system, and will enable Exodus functionality in the FleCSI I/O interface.</li>
<li><b>ENABLE_FLECSIT [default: OFF]</b><br />
 FleCSIT is a command-line utility that simplifies experimental development using FleCSI. This can be thought of as a <em>sandbox</em> mode, where the user can write code that utilizes a particular FleCSI specialization and the FleCSI data and runtime models without the overhead of a full production code project. This option simply enables creation of the FleCSIT executable.</li>
<li><b>ENABLE_JENKINS_OUTPUT [default: OFF]</b><br />
 If this options is on, extra meta data will be output during unit test invocation that may be used by the Jenkins CI system.</li>
<li><b>ENABLE_MPI_CXX_BINDINGS [default: OFF]</b><br />
 This option is a fall-back for codes that actually require the MPI C++ bindings. <b>This interface is deprecated and should only be used if it is impossible to get rid of the dependency.</b></li>
<li><b>ENABLE_OPENMP [default: OFF]</b><br />
 Enable OpenMP support. If enabled, the appropriate flags will be passed to the C++ compiler to enable language support for OpenMP pragmas.</li>
<li><b>ENABLE_OPENSSL [default: OFF]</b><br />
 If enabled, CMake will verify that a suitable OpenSSL library is available on the system, and will enable the FleCSI checksum interface.</li>
<li><b>ENABLE_UNIT_TESTS [default: OFF]</b><br />
 Enable FleCSI unit tests. If enabled, the unit test suite can be run by invoking: <div class="fragment"><div class="line">$ make test</div></div><!-- fragment --></li>
<li><b>FLECSI_COUNTER_TYPE [default: int32_t]</b><br />
 Specify the C++ type to use for the FleCSI counter interface.</li>
<li><b>FLECSI_DBC_ACTION [default: throw]</b><br />
 Select the design-by-contract action.</li>
<li><b>FLECSI_DBC_REQUIRE [default: ON]</b><br />
 Enable DBC pre/post condition assertions.</li>
<li><b>FLECSI_ID_FBITS [default: 4]</b><br />
 Specify the number of bits to be used to represent id flags. This option affects the number of entities that can be represented on a FleCSI mesh type. The number of bits used to represent entities is 62-FLECSI_ID_PBITS-FLECSI_ID_FBITS. With the current defaults there are 38 bits available to represent entities, i.e., up to 274877906944 entities can be resolved.</li>
<li><b>FLECSI_ID_PBITS [default: 20]</b><br />
 Specify the number of bits to be used to represent partition ids. This option affects the number of entities that can be represented on a FleCSI mesh type. The number of bits used to represent entities is 62-FLECSI_ID_PBITS-FLECSI_ID_FBITS. With the current defaults there are 38 bits available to represent entities, i.e., up to 274877906944 entities can be resolved.</li>
<li><b>FLECSI_RUNTIME_MODEL [default: mpi]</b><br />
 Specify the low-level runtime model. Currently, <em>legion</em> and <em>mpi</em> are the only valid options.</li>
<li><b>VERSION_CREATION [default: git describe]</b><br />
 This options allows the user to either directly specify a version by entering it here, or to let the build system provide a version using git describe. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
